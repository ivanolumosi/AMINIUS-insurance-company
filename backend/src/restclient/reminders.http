# =============================================
# REMINDERS HTTP REST CLIENT
# Fully aligned with routes/reminder.routes.ts
# =============================================

### Variables
@baseUrl = http://localhost:3000/api/reminders
@agentId = 7b407c2d-3145-40b0-8c47-1d6f62351b2c
@testReminderId = e5f94403-0ced-418a-b873-4f1b9b956d5a

# =============================================
# CORE REMINDER ROUTES
# =============================================

### Create Reminder (Header-based agentId)
POST {{baseUrl}}
Content-Type: application/json
x-agent-id: {{agentId}}

{
  "ReminderType": "Call",
  "Title": "Call with client",
  "Description": "Call about policy clarification",
  "ReminderDate": "2025-09-15",
  "ReminderTime": "18:30:00",
  "Priority": "High",
  "ClientName": "John Doe",
  "EnableSMS": true,
  "EnableWhatsApp": false,
  "EnablePushNotification": true,
  "AdvanceNotice": "1 day",
  "CustomMessage": "Remember to call John about his policy",
  "AutoSend": false,
  "Notes": "Important client call"
}

### Get All Reminders (Agent param style)
GET {{baseUrl}}/agent/{{agentId}}?pageSize=10&pageNumber=1

### Get All Reminders with Filters
GET {{baseUrl}}/agent/{{agentId}}?pageSize=10&pageNumber=1&reminderType=Call&status=Active&priority=High&startDate=2025-09-01&endDate=2025-09-30

### Get Reminder by ID (Agent param style)
GET {{baseUrl}}/agent/{{agentId}}/reminder/{{testReminderId}}

### Get Reminder by ID (Legacy header style)
GET {{baseUrl}}/{{testReminderId}}
x-agent-id: {{agentId}}

### Update Reminder (Agent param style)
PUT {{baseUrl}}/agent/{{agentId}}/reminder/{{testReminderId}}
Content-Type: application/json

{
  "Title": "Updated Follow up call",
  "Priority": "Medium",
  "Status": "Active",
  "Notes": "Updated notes for the reminder"
}

### Delete Reminder (Agent param style)
DELETE {{baseUrl}}/agent/{{agentId}}/reminder/{{testReminderId}}

### Complete Reminder (Agent param style)
POST {{baseUrl}}/agent/{{agentId}}/reminder/{{testReminderId}}/complete
Content-Type: application/json

{
  "notes": "Successfully completed the call with client"
}

# =============================================
# SPECIALIZED REMINDER ROUTES
# =============================================

### Get Today's Reminders
GET {{baseUrl}}/agent/{{agentId}}/today

### Get Reminders by Type (Call)
GET {{baseUrl}}/agent/{{agentId}}/type/Call

### Get Reminders by Status (Completed)
GET {{baseUrl}}/agent/{{agentId}}/status/Completed

### Get Birthday Reminders
GET {{baseUrl}}/agent/{{agentId}}/birthdays

### Get Policy Expiry Reminders (default 30 days)
GET {{baseUrl}}/agent/{{agentId}}/policy-expiry

### Get Policy Expiry Reminders (15 days ahead)
GET {{baseUrl}}/agent/{{agentId}}/policy-expiry?daysAhead=15

# =============================================
# STATISTICS + SETTINGS
# =============================================

### Get Reminder Statistics
GET {{baseUrl}}/agent/{{agentId}}/statistics

### Get Reminder Settings
GET {{baseUrl}}/agent/{{agentId}}/settings

### Update Reminder Settings
PUT {{baseUrl}}/agent/{{agentId}}/settings
Content-Type: application/json

{
  "ReminderType": "Birthday",
  "IsEnabled": true,
  "DaysBefore": 3,
  "TimeOfDay": "09:00:00",
  "RepeatDaily": false
}

# =============================================
# UTILITY ROUTES
# =============================================

### Validate Phone Number
POST {{baseUrl}}/validate-phone
Content-Type: application/json

{
  "phoneNumber": "0712345678",
  "countryCode": "+254"
}

# =============================================
# BACKWARD COMPATIBILITY ROUTES (header-based)
# =============================================

### Get Today's Reminders
GET {{baseUrl}}/today
x-agent-id: {{agentId}}

### Get Reminder Statistics
GET {{baseUrl}}/statistics
x-agent-id: {{agentId}}

### Get Reminder Settings
GET {{baseUrl}}/settings
x-agent-id: {{agentId}}

### Update Reminder Settings
PUT {{baseUrl}}/settings
Content-Type: application/json
x-agent-id: {{agentId}}

{
  "ReminderType": "Birthday",
  "IsEnabled": true,
  "DaysBefore": 3,
  "TimeOfDay": "09:00:00",
  "RepeatDaily": false
}
